;	HDMODE - ENABLE RC CP/M BIOS WINCHESTER DISK SUPPORT
;	BY MICHAEL RINGGAARD, APRIL 2014

BOOT	EQU	00000H		; WARMBOOT ENTRY
BIOS	EQU	0DA00H		; BIOS ADDRESS FOR 56K CP/M
NUMDRV	EQU	0F334H		; NUMBER OF DRIVES
DRVTYPE	EQU	BIOS+37H	; DRIVE TYPE TABLE
BOOTDEV	EQU	BIOS+47H	; BOOT DEVICE

	ORG	100H
	
;	SET UP FOUR DRIVES, WINCHESTER DISK IS C: AND D:
	MVI	A,04H
	STA	NUMDRV

;	SET DRIVE C: TYPE TO 900K DISK (FIRST PARTITION)
	MVI	A,20H
	STA	DRVTYPE+2

;	SET DRIVE D: TYPE TO 7920K DISK (SECOND PARTITION)
	MVI	A,40H
	STA	DRVTYPE+3

;	BOOT FROM DRIVE C:
	MVI	A,1
	STA	BOOTDEV

;	DONE
	JMP	BOOT

	END

